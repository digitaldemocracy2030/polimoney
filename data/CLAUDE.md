# 最重要

すべての基本指針については[../CLAUDE.md](../CLAUDE.md)を参照してください。

## Data 固有の開発コマンド

### コンバーター使用
```bash
# 基本的な変換
npx tsx converter.ts -i input.json -o output.json

# エラー無視モード（推奨）
npx tsx converter.ts --ignore-errors -i input.json -o output.json
```

## Architecture

### データ変換パイプライン
1. **Input**: Tools（Python）で生成されたOCR解析JSON
2. **Process**: TypeScriptコンバーターで構造化
3. **Output**: フロントエンド用のJSON形式

### 型定義
重要な型定義は[../models/type.d.ts](../models/type.d.ts)を参照：
- **Profile**: 政治家基本情報
- **Report**: 報告書メタデータ
- **Flow**: 資金フロー表示用
- **Transaction**: 個別取引記録

## デモページ作成
詳細は[README_DEMO_PAGE.md](README_DEMO_PAGE.md)を参照。

### 重要な注意事項
**⚠️ データ公開制限**
- 収支データの無許可GitHub公開は禁止
- すべてローカル作業にとどめる
- フォークリポジトリへのコミットも禁止

### 作成手順概要
1. **基本情報整理**: 政治家情報・組織情報・収支データ
2. **データファイル作成**: `demo-{政治家名}.ts`
3. **ページファイル作成**: `app/demo-{政治家名}-{年度}/page.tsx`
4. **画像配置**: `public/demo-{政治家名}.jpg`

### データ入力規則
- **金額**: 円単位（カンマなし）例：`1000000`
- **日付**: `'2024/3/31'`形式
- **パーセンテージ**: `(項目金額 ÷ 総額) × 100`
- **ID**: [ID命名規則](#id命名規則)を参照

#### ID命名規則
id のプレフィクスは二文字で構成されており、汎用/個別、収入/支出を表す
- 汎用/個別
  - 汎用（General）: 大半の議員データで使われる項目、光熱費など
  - 個別（Specific）: 一部の議員や年度のみで使われる項目、特定のサービス利用料など
- 収入/支出
  - 収入（Income）
  - 支出（Expense）
上記組み合わせから、プレフィクスパターンは次の４通りになる
- 汎用項目（収入）: `ig`
- 汎用項目（支出）: `eg`
- 個別項目（収入）: `is`
- 個別項目（支出）: `es`
例: `ig001`、`eg010`

### 型安全性
TypeScript使用のため型定義に厳密に従う：
- 数値は`number`型
- 文字列は`string`型
- 配列は適切な型の配列

### チェックリスト
- [ ] 各年度の金額合計が総収入・総支出と一致
- [ ] パーセンテージ計算が正確
- [ ] 前年繰越と翌年繰越の整合性
- [ ] 画像ファイルパスの一致
- [ ] 開発サーバーでの表示確認

## サンプルファイル
- **データ構造参考**: `demo-kokifujisaki.ts`
- **ページ実装参考**: `../app/demo-koki-fujisaki-2024/page.tsx`
